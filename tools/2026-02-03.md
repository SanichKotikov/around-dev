# Vite меняет хеши всех js чанков при любом изменении

Реальный проект на React, собирается Vite, на выходе получается примерно 60 js файлов:

```
index-DGZT2d08.js
page-DMUtS7f0.js
page-CIOhQsD0.js
и т.д.
```

Меняем исходный код в любом месте проекта, собираем заново, и получаем те же самые js файлы, но с другими хешами в именах. В действительности код изменился только в одном файле, но почему же везде поменялись хеши?

Vite использует `es6 modules`:

```javascript
// index-DGZT2d08.js
const Page = lazy(() => (
  __vitePreload(() => (
    import("./page-DMUtS7f0.js")
  ))
));
```

Заглядываем в любой другой модуль, и видим следующее:

```javascript
// page-DMUtS7f0.js
import { jsx } from "./index-DGZT2d08.js";
```

Все синхронные зависимости, в том числе `node_modules`, Vite складывает во «входную точку» — `index-DGZT2d08.js`. В результате получаем следующее поведение:

Файл с реальными изменениями собирается с новым хешем (ожидаемо), это провоцирует изменение хешей всей цепочки «родителей», вплоть до входной точки (тоже ожидаемо). Изменение последней провоцирует изменение всех остальных файлов, т.к. все они ссылаются на эту самую входную точку.

Это плохо, т.к. вынуждает браузер пользователя скачивать все необходимые файлы заново, даже если в них, кроме путей импортов и экспортов, ничего не поменялось.
