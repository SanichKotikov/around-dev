# Проверяем импорты через ESLint

В процессе улучшения структуры проекта, которую я описывал [здесь](../architecture/2025-10-25.md), задумался над базовыми проверками корректности импортов. Эта структура строится на «функциональном мышлении» (далее ФМ), в котором код должен быть разделён на _данные, вычисления и действия_, поэтому необходимо проверять корректность импортов между определёнными сегментами. Например, чтобы сегмент `ui` (в контексте ФМ это _вычисления_) не мог импортировать сегмент `$api` (в контексте ФМ это _действия_). На самом деле причин и проверок больше, но не суть.

Для эксперимента был выбран [eslint-plugin-boundaries](https://www.jsboundaries.dev). В целом неплохой инструмент, хотя сильно не хватает разделения контекста, но разработка в этом направлении вроде как ведётся. В моём случае, например, необходимы разные правила для проверки верхнего уровня папок и уровня сегментов.

## eslint.config.js

```javascript
import { defineConfig } from 'eslint/config';
import parser from '@typescript-eslint/parser';
import boundaries from './eslint-boundaries.js';

export default defineConfig([
  {
    extends: [boundaries],
    files: ['src/**/*.{ts,tsx}'],
    languageOptions: { parser },
    settings: { 'import/resolver': { typescript: true } },
  },
]);
```

## eslint-boundaries.js

```javascript
import boundariesPlugin from 'eslint-plugin-boundaries';

export default {
  plugins: {
    boundaries: boundariesPlugin,
  },
  settings: {
    'boundaries/elements': [
      { type: '$control', pattern: 'src/*/$control/**' },
      { type: '_core', pattern: 'src/_core/*', mode: 'full' },
      // ...
    ],
  },
  rules: {
    'boundaries/element-types': [
      'warn', {
        default: 'allow',
        message: '[${file.type}] is not allowed to import [${dependency.type}]',
        rules: [
          { from: '$control', disallow: ['$page'] },
          { from: '_core', disallow: ['_ui-kit', 'admin', 'app'] },
          // ...
        ],
      },
    ],
  },
};
```

Полная версия файла [тут](https://gist.github.com/SanichKotikov/a987ca75aed1cc711ec74b2aef219cc8).

Да, все возможные варианты этот код не покрывает, но для начала этих проверок вполне достаточно.
