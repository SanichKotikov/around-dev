# Приколы setState в React, и как оно в SolidJS

Сравним один и тот же код изменения состояния в этих двух, похожих, но совершенно разных, библиотеках.

## React:

```javascript
const [state, setState] = useState(() => Date.now());

const onClick = () => {
  console.log(1);
  setState(() => {
    console.log(2);
    return Date.now();
  });
  console.log(3);
};

const computed = useMemo(() => {
  console.log(4);
  return (new Date(state)).toDateString();
}, [state]);
```

Результат при первом выполнении: 1 2 3 4
При последующих: 1 3 2 4

## SolidJS:

```javascript
const [state, setState] = createSignal(Date.now());

const onClick = () => {
  console.log(1);
  setState(() => {
    console.log(2);
    return Date.now();
  });
  console.log(3);
};

const computed = createMemo(() => {
  console.log(4);
  return (new Date(state())).toDateString();
});
```

Результат всегда одинаковый: 1 2 4 3

А теперь, предлагаю подумать над следующими вопросами:

- Это ожидаемый результат для вас?
- Почему такая разница в React, между первым и последующими выполнениями?
- Как добиться стабильного результата в React?
- Как добиться результата 1 2 3 4 в обоих случаях?
