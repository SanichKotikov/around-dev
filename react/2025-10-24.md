# useEffectEvent

Похоже проблема массива зависимостей `useEffect` настолько всех достала, что в React 19.2 включили специальный хук `useEffectEvent`. Его можно использовать исключительно в паре с `useEffect`, и к тому же оба хука должны быть объявлены в одной и той же функции (компоненте).

### Пример из документации:

```javascript
function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(
      serverUrl,
      roomId,
    );
    connection.on('connected', () => {
      onConnected();
    });
    connection.connect();

    return () => connection.disconnect();
  }, [roomId]);

  return null;
}
```

## А что насчёт эффектов в SolidJS?

- Нет ограничений на расположение (условия не помеха);
- Эффект может быть вложенным, например в другой эффект;
- Нет массива зависимостей (определяется автоматически);
- Для исключения из зависимостей необходимо использовать `untrack`;
- Эффект не выполнится дважды (привет строгий режим в React);
- Эффект может пропускать первый вызов (реагировать только на изменения);
- Для разового вызова лучше использовать `onMount`;
- Эффект вообще не нужен, если код нужно выполнить в момент выполнения компонента;
- Эффект может подписываться и отписываться динамически;
- Эффект может получать предыдущее состояние своего выполнения;
- `onCleanup` можно использовать отдельно;
