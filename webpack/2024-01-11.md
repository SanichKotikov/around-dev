# Пара нюансов в вопросе Webpack vs Vite

На первый взгляд может показаться что одно можно легко заменить на другое, ну или как минимум не трогать код проекта, но это не так. Я столкнулся с двумя моментами, но скорее всего их больше.

## 1. Обработка ошибок загрузки (не существующих) чанков

Если ваша сборка подразумевает что имена чанков между сборками могут отличаться, в хэш части, то хорошей практикой будет добавить обработку ошибки загрузки не существующих файлов. Webpack, в данном случае, возвращает специализированные ошибки:

* Для JS: error.name = `ChunkLoadError`
* Для CSS: error.code = `CSS_CHUNK_LOAD_FAILED`

Vite же, для js вернёт обычную ошибку, сообщение в которой может варьироваться в зависимости от браузера, а для css — заготовленную ошибку `Unable to preload CSS`.

Про обработку таких ошибок расскажу как-нибудь в другой раз.

## 2. Ручное именование чанков

Иногда возникает потребность в более детальной настройке того, что и как попадёт в конкретный чанк. Для этого, в webpack, есть так называемые [магические комментарии](https://webpack.js.org/api/module-methods/#magic-comments). В данный момент нас интересует `webpackChunkName`, который позволяет указать название чанка (то, как будет именоваться js файл).

Естественно, подобные комментарии не работают в Vite. Но, мы не первые, кто столкнулся с этим вопросом, поэтому уже есть [плагин](https://www.npmjs.com/package/vite-plugin-webpackchunkname). Лично пока не пробовал, могут быть нюансы.
